<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<title>WebGL App</title>
</head>
<body style='overflow:hidden;margin:0;background-color:#888'>

<script id='shader-fs' type='text/x-fragment_shader'>

precision highp float;

uniform float u_time;
uniform vec2 translate;
uniform vec2 scale;
uniform float rotate;
uniform float r;
uniform float g;
uniform float b;

void main(void) {

  float x = ( gl_FragCoord.x + translate.x ) * scale.x;
  float y = ( gl_FragCoord.y + translate.y ) * scale.y + 1.0;

  float sin_theta = sin(rotate);
  float cos_theta = cos(rotate);

  float x2 = cos_theta * x - sin_theta * y;
  float y2 = sin_theta * x + cos_theta * y;

  x = x2;
  y = y2;

  float z = 0.0;

  // function to calculate z from x and y
  //z = x - y; // line
  //z = x * x - y; // parabola
  //z = x * x + y * y; // circle
  //z = 0.0 - x * x - x * y - y * y;  // phi
  //z = -2.0 * x * x + x * x * x * x + 2.0 * y * y + 2.0 * x * x * y * y + y * y * y * y;  // lemniscate of bernoulli
  //z = 0.0 - x * x + x * x * x * x + y * y;  // lemniscate of gerono
  z = x * x * x - 3.0 * x * y + y * y * y;  // folium of descartes

  // animate by varying the result with u_time
  z = z * -u_time;

  // grey
  //gl_FragColor.r = gl_FragColor.g = gl_FragColor.b = z;

  // set pixel colours
  gl_FragColor.r = z + r;
  gl_FragColor.g = z + g;
  gl_FragColor.b = z + b;


}

</script>

<script id='shader-vs' type='text/x-vertex_shader'>

attribute vec3 a_position;
attribute vec4 a_color;
varying vec4 v_color;

void main(void) {

  gl_Position = vec4(a_position, 1);
  v_color = a_color;

}

</script>

<script type="module">
'set strict'

import {sWebGL} from './sWebGL.mjs'

window.onload = function() {
  sWebGL({

  })
}

</script>

</body>
</html>
